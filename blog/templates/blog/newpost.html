<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>پست جدید</title>
    </head>
<body>
    <form method="post">
        <textarea id="mytextarea" name="mytextarea"></textarea>
        <input type="submit", value="ثیت">
    </form>
    <input type="button", value="ثیت">
    <div id='test'>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.tiny.cloud/1/jke4axl2kl4cd4f0p1e7uo6y0d9l2s68nclswu6nvxwmqw0c/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
        tinymce.init({
            selector: '#mytextarea',
            branding: false,
            menubar : 'format edit',
            elementpath: false,
            plugins: 'formattingcode  link image alignment directionality',
            toolbar: 'undo redo | bold italic | alignleft aligncenter alignright alignjustify | indent outdent | ltr rtl | code link image | ',
            image_title: true,
            automatic_uploads: true,
            images_upload_url: 'http://localhost',
        
        file_picker_types: 'image',
        file_picker_callback: function (cb, value, meta) {
            var input = document.createElement('input');
            input.setAttribute('type', 'file');
            input.setAttribute('accept', 'image/*');
            input.onchange = function () {
            var file = this.files[0];

            var reader = new FileReader();
            reader.onload = function () {
                var id = 'blobid' + (new Date()).getTime();
                var blobCache =  tinymce.activeEditor.editorUpload.blobCache;
                var base64 = reader.result.split(',')[1];
                var blobInfo = blobCache.create(id, file, base64);
                blobCache.add(blobInfo);
                cb(blobInfo.blobUri(), { title: file.name });
            };
            reader.readAsDataURL(file);
    };

    input.click();
  },
  content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:15px; line-height: 0.4}'
});
    </script>
    <!-- <script>
        var str = 'aliiiiiiiii'
        $( "#test" ).last().html( str );
    </script> -->
</body>
</html>